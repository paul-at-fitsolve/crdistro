(function(d){Drupal.behaviors.cr_share={namespace:"cr_share",config:{updateTime:100},$instances:null,$win:null,socialised:{},updateTimeout:null,activateInView:!1,attach:function(a,d){Drupal.behaviors.cr_share.setupSocialiteJs.call(a)},setupSocialiteJs:function(){var a=Drupal.behaviors.cr_share;a.config=d.extend(a.config,Drupal.settings[a.namespace]);a.$instances=d(".socialitejs",this);a.activateInView=a.config.touch_activate_in_view&&Modernizr&&Modernizr.touch?!0:!1;Socialite.setup(a.config.socialitejsConfig);
if(a.activateInView)a.$win=d(window),a.$win.on("resize",a.EH_onUpdate).on("scroll",a.EH_onUpdate),setTimeout(a.CB_loadSocialiteJsInView,100);else a.$instances.once("cr_share").one(a.config.mouseEvent,a.EH_loadSocialiteJs)},EH_loadSocialiteJs:function(a){a.preventDefault();Socialite.load(this)},CB_loadSocialiteJsInView:function(){for(var a=Drupal.behaviors.cr_share,e=a.$win.scrollTop(),f=a.$win.scrollLeft(),k=f+a.$win.width(),l=e+a.$win.height(),c=0;c<a.$instances.length;c++)if(!a.socialised[c]){var b=
d(a.$instances[c]),g=b.offset().top,h=b.offset().left,m=h+b.width(),b=g+b.height();if(g>=e&&g<=l||b>=e&&b<=l)if(h>=f&&h<=k||m>=f&&m<=k)a.socialised[c]=!0,Socialite.load(a.$instances[c])}},EH_onUpdate:function(){var a=Drupal.behaviors.cr_share;a.updateTimeout&&clearTimeout(a.updateTimeout);a.updateTimeout=setTimeout(a.CB_loadSocialiteJsInView,a.config.updateTime)}}})(jQuery);